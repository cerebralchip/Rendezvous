{% extends "base.html" %}
{% block content %}
        <article>
            <h1>{{ post.Text }}</h1>
            <p>Country: {{ post.CountryID.CountryName }}</p>
            <p>Published: {{ post.published_date }}</p>
            <p>
                Upvotes: <a href="{% url 'upvote_post' post_id=post.PostID %}">{{ post.Upvotes }}</a> |
                Downvotes: <a href="{% url 'downvote_post' post_id=post.PostID %}">{{ post.Downvotes }}</a>
            </p>
            <p>Tags: {% for tag in post.Tags.all %}{{ tag.TagName }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>

            {% if post.Picture %}
                <img src="{{ post.Picture.url }}" alt="{{ post.Text }}">
            {% endif %}

            <div class="post-content">
                <!-- Display the post content here -->
                <p>{{ post.Text }}</p>
            </div>

            <section class="comments">
                <h2>Comments</h2>
                {% if post.comments.all %}
                    <ul>
                        {% for comment in post.comments.all %}
                            <li>
                                <p>{{ comment.Content }}</p>
                                <p>By: {{ comment.UserID.username }}</p>
                                <p>
                                    Upvotes: <a href="{% url 'upvote_comment' comment_id=comment.CommentID %}">{{ comment.Upvotes }}</a> |
                                    Downvotes: <a href="{% url 'downvote_comment' comment_id=comment.CommentID %}">{{ comment.Downvotes }}</a>
                                </p>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No comments yet.</p>
                {% endif %}

                <!-- Add a form to submit new comments -->
                <form method="post" action="{% url 'comment' post_id=post.PostID %}">
                    {% csrf_token %}
                    <textarea name="content" placeholder="Write a comment"></textarea>
                    <button type="submit">Submit</button>
                </form>
            </section>
        </article>
{% endblock %}